<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    
    <style>
    table, div {
        width: 500px;
        text-align: center;
    }
    td {
        border: 1px solid black;
        width: 500px;
        height: 50px;
        text-align: center;
    }       
    </style>    
</head>
<body>

</body>
<script>
let body = document.body;
let listItem = document.createElement('li');

     // Пример отправки POST запроса:
   async function postData(url = 'https://diesewelt.online/graphql', data = {
        query: `
            { posts { 
                nodes {
                    id
                    title
                    date
            }   }   }`    
    }) {
     // Default options are marked with *

    const response = await fetch(url, {
        method: 'POST', // *GET, POST, PUT, DELETE, etc.
        mode: 'cors', // no-cors, *cors, same-origin
        cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached
        credentials: 'same-origin', // include, *same-origin, omit
        headers: {
        'Content-Type': 'application/json'
        // 'Content-Type': 'application/x-www-form-urlencoded',
        },
        redirect: 'follow', // manual, *follow, error
        referrerPolicy: 'no-referrer', // no-referrer, *client
        body: JSON.stringify(data) // body data type must match "Content-Type" header
    });

    return await response.json(); // parses JSON response into native JavaScript objects
    }
    postData();
    let dannie = postData();
  alert(dannie[1]);
    listItem.appendChild(document.createElement('strong')).textContent = dannie;

    body.appendChild(listItem);

   /* let user = {
  name: 'Dima'
};

let response = await fetch('http://example.com/api/user', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json;charset=utf-8'
  },
  body: JSON.stringify(user)
});

let result = await response.json();*/
    

   
   

    


   /*const myRequest = new Request('products.json');

    fetch('https://diesewelt.online/graphql', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ 
        query: `
            { posts { 
                nodes {
                    id
                    title
                    date
            }   }   }` }),
    })
    .then(res => res.json())
    .then(res => {
        for(let i = 0; i < posts.length; i++) {
            alert(res[i]);
            u = res.json();
            alert(u);
            let listItem = document.createElement('li');
            listItem.appendChild(
            document.createElement('strong')
            ).textContent = posts.id;
            listItem.append(
            ` Вот он тайтл ${
            res.title
            }. Cost: `
            );
            listItem.appendChild(
            document.createElement('strong')
            ).textContent = `£${posts.date}`;              
        }      
    }
    )
    .catch(console.error);*/


 
   /* const myList = document.querySelector('ul');
    const myRequest = new Request('products.json');

    fetch(myRequest)
    .then(response => response.json())
    .then(data => {
        for (const product of data.products) {
        let listItem = document.createElement('li');
        listItem.appendChild(
            document.createElement('strong')
        ).textContent = product.Name;
        listItem.append(
            ` can be found in ${
            product.Location
            }. Cost: `
        );
        listItem.appendChild(
            document.createElement('strong')
        ).textContent = `£${product.Price}`;
        myList.appendChild(listItem);
        }
    })
    .catch(console.error);*/
  
  /*  .then(resp => {return resp.text()})
   .then(resBody => {razmetka = resBody})*/

/*   fetch('https://diesewelt.online/graphql', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ 
        query: `
            { posts { 
                nodes {
                    id
                    title
                    date
            }   }   }` }),
    })    
    .then(res => {dannie = Response.json()})      
    
    alert(dannie);*/
    

    /*const myList = document.querySelector('ul');
    const myRequest = new Request('products.json');

    fetch(myRequest)
    .then(response => response.json())
    .then(data => {
        for (const product of data.products) {
        let listItem = document.createElement('li');
        listItem.appendChild(
            document.createElement('strong')
        ).textContent = product.Name;
        listItem.append(
            ` can be found in ${
            product.Location
            }. Cost: `
        );
        listItem.appendChild(
            document.createElement('strong')
        ).textContent = `£${product.Price}`;
        myList.appendChild(listItem);
        }
    })
    .catch(console.error);*/



/*fetch('https://www.learnwithjason.dev/graphql', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
  },
  body: JSON.stringify({
    query: `
        query GetLearnWithJasonEpisodes($now: DateTime!) {
          allEpisode(limit: 10, sort: {date: ASC}, where: {date: {gte: $now}}) {
            date
            title
            guest {
              name
              twitter
            }
            description
          }
        }
      `,
    variables: {
      now: new Date().toISOString(),
    },
  }),
})
  .then((res) => res.json())
  .then((result) => console.log(result));*/

    let title = [ 
       'Первый пост',
       'Второй пост',
       'Третий пост',
       'Четвертый пост',
       'Пятый пост',
       'Шестой пост',
       'Седьмой пост',
       'Восьмой пост',
       'Девятый пост',                    
       'Десятый пост',
    ];

    let posts = [
        'Подробное описание Первый пост',
        'Подробное описание Второй пост',
        'Подробное описание Третий пост',
        'Подробное описание Четвертый пост',
        'Подробное описание Пятый пост',
        'Подробное описание Шестой пост',
        'Подробное описание Седьмой пост',
        'Подробное описание Восьмой пост',
        'Подробное описание Девятый пост',                    
        'Подробное описание Десятый пост',
    ];

    function tableCreate() {
        let body = document.body,
            tbl  = document.createElement( 'table' );
        for( let i = 0; i < title.length; i++ ) {
            let tr = tbl.insertRow();
            let td = tr.insertCell();
        
            td.appendChild(document.createTextNode( title[i] ));
            td.setAttribute( 'id', 't'+i );
            td.addEventListener
                ("click", () => {clickTitle( i )}, false);       
        }
        body.appendChild(tbl);
        }
        
        tableCreate();
    
    function clickTitle(number){     
        let divPost = document.getElementById('d'+ number);
        (divPost.style.display=='none') ?    
        divPost.style.display='' : 
        divPost.style.display='none';                                    
    }

    function divCreate(){
        for(let i = 0; i < posts.length; i++) {
            let line = document.getElementById('t'+ i); 
            let dv = document.createElement("div");
            line.appendChild( dv );      
            dv.appendChild(document.createTextNode( posts[i] ));
            dv.setAttribute('id', 'd'+ i);
            elem = document.getElementById('d'+ i);
            elem.style.display='none';        
        }
    }        
    divCreate();

</script> 
</html>